language: python
python: '2.7'
before_install:
- sudo apt-get update -qq
install:
- pip install ansible
addons:
  sonarqube: true
env:
  global:
  - secure: KVTcLC5MHUl3riKJ9lbfJ8iDCKCCrGaN33DqzNKuLwupwn8+mH4X4mXZUwnXDKtg3rV44YY6DCstcZDfdvVagIyDTySq+QMHDpZTqQNzNVKvytGI8nPb+Jh29o/mkh32g1OUniHHyI5g0DQk4QQCCde/pIJlfKNwrZm/NXnhRW+qdYqln/Gqm3m0Tt/2O/2kXQtLvsdlDGnJZoCKkCHutW5dWhsJMfXnndSSS6MWgYmKKVWImq9Ar5HCMGgMFsu+UQN41xsF+n3HfMPS+5lr6jEpOogmog8lb/tJmOSbB2hQHunh5sSerdNk+fPtufTEFRoVixW5uCNynF5GDWqL3OLSJ85u+Jtj3EjJaXSbTcebfjN5uBLjpAwShYpNfu0CImoANqRKeNDKh/L7xiDatuvj18VSa3aEO6R/R0mUceofvm34n8u8V8Ve+cf88Vw6oWuTjl3an1EF94wDWBQB2aYajbZMyG5TD5AWIv8QwQ+nC01oao9EbQWvPN0ZR9DxrWsFW3NFWX8gggrHTXQ8+u1YNTiXNraFn3K0c2h0ajsaXwb/4tFUz6aTQyFa55yiaDaWHTn6B2xSgaing5egofr0Sm0aOY9qihOWHySHFsvIh8gyvlb+DqXLhu7ekwrQkn8NwsVXsCo0nzmjQNy2RdmVHDoqsn+QBP8+WDmoWg0=

script:
- ansible-playbook bbuddy.yml --inventory-file=host_travis_ci.txt --syntax-check
- ansible-playbook bbuddy.yml --inventory-file=host_travis_ci.txt
- bash -lec "gradle sonar"
- bash -lec "sonar-scanner -Dsonar.login=$SONAR_TOKEN"
